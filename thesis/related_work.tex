\chapter{Related Work}

In this chapter we discuss earlier relevant work in the area of improving the
performance of Web services in \gls{dil} environments. Improving Web services
is critical for both civil and military users as increasing the performance
means that applications become faster and more reliable. For these reasons
quite amount of research has been done in the area of optimizing network
applications. Improving the performance of Web services in \gls{dil}
environments has been explored, but mostly for SOAP- based Web services and
not REST.

In the following sections we identify results and recommendations that are
applicable to this thesis. We get started by looking into the work of the NATO
research group ``IST-090'' and ``IST-118'', which identified improvements in
order to make \gls{soa} applications in DIL networks. Next, based on these
recommendations, we will look into work done in the area of alternative
transport protocols and existing proxy implementations.  Finally, we summarize
the findings that are applicable to this thesis with regards to the scope and
premises.

\section{Making SOA applicable at the tactical level}

As a follow-on to the work of IST-090, the research group IST-118 was created
with the goal to create a recommendation for using SOA in DIL networks. In the
paper IST-118\cite{ist-118} they summarized the findings of IST-090. Although
the paper only looked into W3C Web services, many of their recommendations
are also applicable to RESTful Web services. They identified three key issues
that needs to be addressed in order to apply Web services in tactical
networks\cite{ist-090, ist-118}:

\label{section:DIL-problems}

\subsubsection{1. End-to-end connections}

Web services transport protocols depend on a direct, end-to-end connection
between the client and the service. Attempting to establish and maintaining
connections in DIL environments can lead to increased communication overhead and
possible complete breakdown of communication. Most Web services use TCP as the
transport protocol, which is requires an uninterrupted connection in order to
function. In DIL environments with high error rates and high latencies, the
congestion control of TCP can cause sub-optimal utilization of the network due
to frequent connection timeouts. Similar, HTTP, which is the application layer
protocol most often used together with TCP, struggles in such environments. HTTP
is a synchronous protocol, which means that the HTTP connection is kept open
until a response is received. Long response times cause timeouts. IST-090 points
out the obvious solution to replace HTTP and TCP with other, more suitable
protocols.

The IST-90 report mentions two approaches to replace HTTP/TCP. The clients and
services themselves can be modified to support other protocols, or proxies
which support alternative protocols can be used\cite{ist-090}. Moreover, they
pointed out that if using a proxy solution, standards compliance can be
retained.


\subsubsection{2. Network heterogeneity}

Another issue is when heterogeneous networks are interconnected. Different
performance in networks may lead to buildup of data in buffers, risking loss of
information. A proposed solution to this is to have store-and-forward support,
which can support that messages are not dropped, but stored and forwarded when
possible.


\subsubsection{3. Web service overhead}

W3C Web services are associated with a considerable amount of overhead. Web
Service technology is based on SOAP, which use XML-based messages. It is a
textual data format and produce much larger messages than binary formats.
Optimization approaches should seek to reduce the network traffic generated by
Web services by using techniques as compression to reduce the size of messages.
Another approach is to reduce the number of messages being sent, which was
looked into in IST-090\cite{ist-090}. In their work they investigated three
different ways to do this:

\begin{enumerate}
    \item Employing caching near the client in order to reuse older messages.
    \item Using publish/subscribe paradigm, which allows clients to subscribe to
    information instead of requesting it. This allows the same message to be sent
    to multiple clients.
    \item Employing content filtering, which filters out unnecessary data.
\end{enumerate}

The scope of this thesis is to optimize for request-reply type of clients
and Web services. Furthermore, since we are investigating general-purpose
optimization techniques without knowledge of the payload, these
recommendations does not quite apply to us. However, to reduce Web service
overhead we can apply the well known technique of compression.

\subsubsection{Compression}

Data compression is the technique of encoding information using fewer bits than
the original representation. Reducing the amount of bits we need to transmit
would greatly increase performance, especially in  a limited network. The
reduction is often expressed in the term \textit{compression rate}, which
express the ratio between the uncompressed size and compressed size of the
payload.  Moreover, there exist two types of compression, \textit{lossy} and
\textit{lossless compression}. Lossy compression is used to compress data such
as images and movies where the consequence of loosing some of the data is not
critical. Lossless compression utilize repeating patterns in the data in order
to represents the same data in a more efficient way.

\gls{xml} is the data format used by W3C Web services and has a significant
overhead. A previous study evaluated different lossless compressions techniques
for exchanging XML documents using W3C Web services\cite{johnsen-compression}.
They evaluated both XML-specific and general purpose (payload agnostic)
compression algorithms. There exist a great number of different compression
techniques, so the authors focused on a few they saw as promising for use in
tactical communication networks. The first one, \gls{efx}, encodes XML documents
in a binary instead of textual format. The two other was the XML-specific XMLPPM
and general-purpose GZIP.

In their evaluation they saw that for all techniques, larger XML documents
granted a higher compression ratio than smaller documents. As the average, EFX
applied with a built in proprietary ZIP enabled, had the highest compression
ratio, followed by GZIP. However, they concluded that all evaluated techniques
provided a significant reduction of payload size, so the specific technique was
of less importance.

\section{Previous evaluations of alternative protocols}

Previous studies have investigated potential gains from replacing HTTP/TCP with
alternative protocols \cite{evaluation-transport-protocols-web-services}. They
looked into TCP, UDP, SCTP and AMQP for conveying Web services traffic under
typical military networking conditions. The researchers found that \gls{sctp}
had the highest success rate in military tactical communication. However, on the
lower bandwidth links the protocols tends to generate more overhead than TCP.
They pointed out that this was due to SCTP having a more complex connection
handshake procedure and in addition use heartbeat packets.

\section{Tuning application server parameters}

When setting up an application server, several parameters which can affect the
performance of Web services running on the application server can be configured.
Wrong or bad configuration may cause inaccurate timeouts and congestion in the
network. In a paper written by researchers at \gls{ntnu} and FFI, the authors
investigated how such tuning affected the performance of Web services in
different emulated tactical
networks\cite{johnsen-bloebaum-recommendations-web-services-tactical-domain}. In
their study they investigated how tuning server parameters affect the performs
of both \gls{rest} and SOAP Web services. They identified a number of key HTTP
and TCP tuning parameters:

\paragraph{HTTP Timeout} Controls how long a HTTP connection can be deemed as
idle and kept in the "keep-alive" state. Having a to low timeout on networks
with low bandwidth, can potentially flood the network with packets that have
timed out. Consideration should therefor be taken when setting setting this
parameter for mobile tactical networks.

\paragraph{HTTP Compression} Enables HTTP/1.1 GZIP compression.

\paragraph{HTTP Chunking} Allows the server to send data in dynamic chunks.

\paragraph{HTTP Header and Send Buffer Sizes} Can vary the size of the buffers
that hold the request and send data, respectively.

\paragraph{TCP Idle Key Timeout} Sets the time before an idle TCP channel
closes.

\paragraph{TCP Read and Write Timeouts} Set the timeout for TCP read and write
operations, respectively.

\paragraph{TCP Selector Poll Timeout} Sets the time a \gls{nio} selector will
block waiting for user requests.

\paragraph{TCP Buffer Size} Sets the size of the buffer that holds input streams
created by the network listener.

\paragraph{TCP Batching/TCP NO\_DELAY} Batches together small TCP packets into
larger packets.

\paragraph{MTU Size} The maximum transmission unit size regulates the largest
data unit that can be passed onwards. In tactical military communication the MTU
size can be very low(down to 128 bytes).

\paragraph{}
After running their experiments they concluded that few of the parameters
actually had any significant impact on the performance of the Web Service.
However, they identified HTTP Chunking configuration as having the most impact
on the performance. It significantly improved the performance in different types
of networks and for both SOAP and RESTful Web services.


\section{Proxy optimization}

One of the recommendations of IST-090 was the usage of proxies. This
recommendation has been picked-up by other research group and a set of proxies
for optimizing Web services in DIL networks already exist. However, many of them
does not fulfill all the requirements we have for our proxy. Some of them does
only support SOAP Web services and others are unusable due to security reasons.
This section lists and discuss previous implementations of such proxies.

\subsection{DSProxy}

DSProxy is a proxy solution developed by \gls{ffi}, which transports SOAP
messages over DIL networks\cite{ieee-dsproxy}. It reduces bandwidth needs by
employing different optimization techniques such as compression. DSProxy also
provides delay tolerance, which allows \gls{cots} clients to function in DIL
networks.

The downside with DSProxy is that it only support SOAP, which leaves RESTful Web
services out of the picture.

\subsection{AFRO}

\gls{afro} is an edge proxy which offers different levels of \gls{qos} to Web
services through performance monitoring and application of the context-aware
service provision paradigm\cite{ist-090}. It perform so called adaption actions, which
modifies the SOAP XML messages by changing their encoding to more efficient data
representation. It also cuts out information that is accepted to be removed by
the service requester.

 However, since the proxy modifies the data being sent, the digital signature of
 the data is also changed. In applications where we want to be sure that no one
 has tampered with the data before arriving, checksums are often used. Therefore
 this solution would not work for such applications.


\subsection{Suri}
To be done.
%https://www.researchgate.net/profile/Niranjan_Suri/publications



\section{Summary}

In this chapter we looked into efforts previously undertaken in order to improve
the performance of Web services in networks with the DIL characteristics. We
identified compression with EFX as proven technique to reduce the size of
messages sent over the network. Next, we looked into the paper IST-090 and the
challenges that comes with DIL networks. We saw how IST-090 pointed to the usage
of proxies. Furthermore, we investigated previous attempts with the usage of
alternative transport protocols, before we looked into previous efforts in the
area of tuning application server parameters. Finally, we discussed previously
developed proxies for DIL networks and discovered that they do not fulfill all
the requirements that we have. Proxies previously created are either limited to
SOAP-based Web services or are inadequate to be used due to security reasons.

%%%%%%%% TABLE OPTIMALIZATION OVERVIEW %%%%%%%%%%%%%
\begin{table}[h]
\begin{tabularx}{\textwidth}{| X | X |}
\hline
  \textbf{Protocol Stack} & \textbf{optimization possibilities} \\ \hline
  The application & Optimize the application\\ \hline
  Web service messaging: SOAP & Optimize SOAP, e.g XML compression \\ \hline
  HTTP/TCP, UDP or other transport protocols & SOAP is transport agnostic. Other
  protocols can be used. \\ \hline
  IP & NATO NEC feasibility study states that all protocols should be over IP. \\
  \hline
  Lower layers & Not in the scope of this thesis. \\ \hline
\end{tabularx}
\caption{Optimization possibilities.} \label{table:optimalization-overview}
\end{table}
